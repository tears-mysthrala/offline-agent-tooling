# Repository Agent Instructions

## Terminal Workflow
- Do not execute commands directly through the agent terminal. Copilot Chat still prompts for command approval, so we rely on an external wrapper instead.
- Queue every required command inside scripts/commands.txt. Use one command per line. Blank lines and lines that start with the hash symbol are treated as comments and ignored by the runner.
- After updating the queue,  run the command `pwsh -File scripts/command-runner.ps1`. 

## Wrapper Expectations
1. Document why each command is needed directly in scripts/commands.txt by adding surrounding comment lines.
2. Keep commands idempotent whenever possible. If a command is destructive or irreversible, call that out in the conversation before running the wrapper.
3. When commands must run even if earlier ones fail, add the switch `-ContinueOnError` when invoking the wrapper.
4. The wrapper streams output to the console and saves a log file in logs/command-runner-<timestamp>.log. Always read the log excerpts whenever validation is required.
5. After the wrapper runs, reconcile the results with the plan. If file names, paths, or exit codes differ from expectations, adjust the plan before continuing.

## Validation Checklist
- Prefer verifying results through the filesystem or automated tests instead of assuming success from command output alone.
- If command output must be parsed, look at the exact lines you need from the log to avoid misinterpretation.
- Remind to clear or archive scripts/commands.txt after successful execution so the queue does not run twice.
